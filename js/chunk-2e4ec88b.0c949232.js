(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e4ec88b"],{1593:function(t,e,a){"use strict";a("9fc3")},"99da":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-10 offset-lg-1"},[a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col-12 col-lg-10 offset-lg-1 d-flex justify-content-start"},[a("router-link",{staticClass:"fontOrbitron fz_20 fz_md_30 text-black\n            text-decoration-none",attrs:{to:"/home"}},[t._v("Hardware Store")])],1)]),a("div",{staticClass:"row mb-2 mb-lg-5"},[a("div",{staticClass:"col-12 col-lg-10 offset-lg-1 d-flex justify-content-start"},[a("router-link",{staticClass:"text-black mr-2 text-decoration-none",attrs:{to:"/products"}},[t._v("Cart")]),t._v("> "),a("div",{staticClass:"text-black mx-2 font-weight-bold"},[t._v("Information")]),t._v("> "),a("div",{staticClass:"text-secondary ml-2"},[t._v("Payment")])],1)]),a("div",{staticClass:"row flex-column-reverse flex-lg-row"},[a("div",{staticClass:"col-12 col-lg-6 offset-lg-1 mt-3 mt-lg-0"},[a("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.invalid;return[a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder.apply(null,arguments)}}},[a("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("div",{staticClass:"d-flex justify-content-between"},[a("label",{staticClass:"text-left",attrs:{for:"email"}},[a("span",{staticClass:"text-danger mr-1"},[t._v("*")]),t._v("Email")]),a("div",[a("div",{staticClass:"text-danger"},[t._v("* 為必填項目")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control form-control-lg mb-2",class:s,attrs:{id:"email",type:"email",name:"Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),a("span",{staticClass:"invalid-feedback text-right"},[t._v(t._s(o[0]))])]}}],null,!0)}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 w_max_lg_50 pr-lg-1"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{staticClass:"text-left w-100",attrs:{for:"name"}},[a("span",{staticClass:"text-danger mr-1"},[t._v("*")]),t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control form-control-lg mb-2",class:s,attrs:{id:"name",type:"text",name:"收件人姓名"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),a("span",{staticClass:"invalid-feedback text-right"},[t._v(t._s(o[0]))])]}}],null,!0)})],1),a("div",{staticClass:"col-12 w_max_lg_50 pl-lg-1"},[a("validation-provider",{attrs:{rules:"required|min:8|numeric"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{staticClass:"text-left w-100",attrs:{for:"tel"}},[a("span",{staticClass:"text-danger mr-1"},[t._v("*")]),t._v("聯絡電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"form-control\n                    form-control-lg mb-2",class:s,attrs:{id:"tel",type:"tel",name:"聯絡電話"},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}}),a("span",{staticClass:"invalid-feedback text-right"},[t._v(t._s(o[0]))])]}}],null,!0)})],1)]),a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,s=e.classes;return[a("label",{staticClass:"text-left w-100",attrs:{for:"address"}},[a("span",{staticClass:"text-danger mr-1"},[t._v("*")]),t._v("收件地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control form-control-lg mb-2",class:s,attrs:{id:"address",type:"text",name:"收件地址"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}),a("span",{staticClass:"invalid-feedback text-right"},[t._v(t._s(o[0]))])]}}],null,!0)}),a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors;return[a("label",{staticClass:"text-left w-100",attrs:{for:"payment"}},[a("span",{staticClass:"text-danger mr-1"},[t._v("*")]),t._v("付款方式")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment,expression:"form.payment"}],staticClass:"custom-select custom-select-lg mb-2",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("請選擇付款方式")]),a("option",{attrs:{value:"WebATM"}},[t._v(" WebATM ")]),a("option",{attrs:{value:"ATM"}},[t._v(" ATM ")]),a("option",{attrs:{value:"CVS"}},[t._v(" CVS ")]),a("option",{attrs:{value:"Barcode"}},[t._v(" Barcode ")]),a("option",{attrs:{value:"Credit"}},[t._v(" Credit ")]),a("option",{attrs:{value:"ApplePay"}},[t._v(" ApplePay ")]),a("option",{attrs:{value:"GooglePay"}},[t._v(" GooglePay ")])]),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(o[0]))])]}}],null,!0)}),a("label",{staticClass:"text-left w-100",attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control form-control-lg mb-3",attrs:{rows:"5",id:"message"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}}),a("div",{staticClass:"d-flex flex-column flex-lg-row\n              align-items-center justify-content-between"},[a("router-link",{staticClass:"d-flex align-items-center\n                text-decoration-none mb-3 mb-lg-0",attrs:{to:"/products"}},[a("span",{staticClass:"material-icons"},[t._v(" keyboard_arrow_left ")]),t._v("返回購物車 ")]),a("button",{staticClass:"btn btn-black\n                fz_24 rounded-0 px-6 mb-5 mb-lg-0",attrs:{type:"submit",disabled:o}},[t._v(" 前往付款")])],1)],1)]}}])})],1),a("div",{staticClass:"col-12 col-lg-5 mt-3 mt-lg-1"},[a("div",{staticClass:"bg-gray"},[a("div",{staticClass:"p-2 p-lg-3 w-100 d_block d-lg-none\n              font-weight-bold fz_20"},[a("div",{staticClass:"p-2 w-100 d-flex justify-content-between align-items-center",on:{click:t.showCartDetail}},[t._v(" 總金額 "),a("div",{staticClass:"d-flex align-items-center"},[t.cartTotal>2e3?a("div",{staticClass:"cartDetail_total"},[t._v(" NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(Math.round(t.cartTotal-t.couponPrice))))+" ")]):a("div",{staticClass:"cartDetail_total"},[t._v("NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(Math.round(t.cartTotal-t.couponPrice)+60))))]),t._m(0)])])]),a("hr",{staticClass:"my-0 mx-3 d_none d-lg-none border-secondary cartDetail_line"}),a("ul",{staticClass:"listStyle_none d_none d-lg-block p-3 m-0 text-left",attrs:{id:"cartDetail"}},[t._l(t.cart,(function(e){return a("li",{key:e.product.id,staticClass:"d-flex bg-gray mb-2"},[a("div",{staticClass:"card-img-top rounded-0 cartImg_sm",style:{background:"url("+e.product.imageUrl[0]+")"}}),a("div",{staticClass:"w-100"},[a("div",{staticClass:"p-2 h-100 w-100 d-flex align-items-center justify-content-between"},[a("div",{staticClass:"font-weight-bold mb-1 d-flex\n                    flex-column flex-lg-row align-items-start\n                    align-items-lg-end justify-content-between"},[t._v(" "+t._s(e.product.title)+" "),a("span",{staticClass:"fz_14 ml-lg-2 fontRoboto font-weight-normal"},[t._v(" x "+t._s(e.quantity))])]),a("div",{staticClass:"d-flex justify-content-between align-items-center"},[a("div",{staticClass:"text-right"},[t._v(" NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(e.quantity*e.product.price))))])])])])])})),a("hr",{staticClass:"my-4 border-secondary"}),a("li",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"w-100 d-flex mb-2 flex-column align-items-end"},[a("div",{staticClass:"w-100 d-flex"},[a("div",{staticClass:"d-flex w-100 position-relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.code,expression:"coupon.code"}],staticClass:"form-control rounded-0",attrs:{type:"text",id:"coupons",placeholder:"請輸入優惠卷"},domProps:{value:t.coupon.code},on:{input:function(e){e.target.composing||t.$set(t.coupon,"code",e.target.value)}}}),a("div",{staticClass:"position-absolute loading_position"},[!0===t.couponLoading?a("div",{staticClass:"spinner-border spinner-border_sm text-primary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):t._e(),!0===t.couponWorking?a("span",{staticClass:"material-icons text-success font-weight-bold"},[t._v(" done ")]):t._e(),!1===t.couponWorking?a("span",{staticClass:"material-icons text-danger font-weight-bold"},[t._v(" close ")]):t._e()])])]),!1===t.couponWorking&&t.coupon.code?a("div",{staticClass:"fz_14 mt-2 text-danger text-left\n                  "},[t._v("找不到此優惠卷，請您再次確認")]):t._e()])]),a("li",{staticClass:"p-2 d-flex justify-content-between"},[t._v(" 購物車金額 "),a("div",{staticClass:"d-flex flex-column align-items-end"},[a("span",[t._v(" NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(Math.round(t.cartTotal)))))]),!0===t.couponWorking&&t.coupon.code?a("span",{staticClass:"text-danger"},[t._v(" 節省 - NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(t.couponPrice))))]):t._e()])]),a("li",{staticClass:"p-2 d-flex justify-content-between"},[t._v(" 運費 "),t.cartTotal>2e3?a("div",[a("span",{staticClass:"mr-2 text-danger font-weight-bold"},[t._v("( 滿 2, 000 免運 )")]),t._v("NT 0 ")]):a("div",[t._v("NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(60))))])]),a("li",{staticClass:"p-2 d-flex justify-content-between font-weight-bold fz_20"},[t._v(" 總金額 "),t.cartTotal>2e3?a("div",[t._v(" NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(Math.round(t.cartTotal-t.couponPrice))))+" ")]):a("div",[t._v(" NT "+t._s(t._f("DollarSign")(t._f("toCurrency")(Math.round(t.cartTotal-t.couponPrice)+60)))+" ")])])],2)])])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex align-items-center ml-2"},[a("span",{staticClass:"material-icons showCartDetail_down"},[t._v(" keyboard_arrow_down ")]),a("span",{staticClass:"material-icons d_none showCartDetail_up"},[t._v(" keyboard_arrow_up ")])])}],n=(a("159b"),a("99af"),{data:function(){return{form:{name:"",email:"",tel:"",address:"",payment:"",message:""},cartTotal:0,cartTotalCoupon:0,coupon:{},couponPrice:0,couponWorking:"",couponLoading:!1}},computed:{cart:function(){return this.$store.state.cart}},watch:{cart:function(){var t=this;return this.cartTotal=0,this.cart.forEach((function(e){t.cartTotal+=e.quantity*e.product.price})),this.cartTotal},"coupon.code":function(){this.checkCoupon(this.coupon.code)}},methods:{getCart:function(){this.$store.dispatch("getCart")},showCartDetail:function(){$("#cartDetail").slideToggle(300),$(".cartDetail_line").toggleClass("d-block"),$(".showCartDetail_down").toggleClass("d-none"),$(".showCartDetail_up").toggleClass("d-block"),$(".cartDetail_total").toggleClass("d-none")},createOrder:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("8a8058c0-58d2-485b-b7fc-3c9be181cca7","/ec/orders");this.coupon.code&&(this.form.coupon=this.coupon.code),this.$http.post(e,this.form).then((function(e){e.data.data.id&&(t.$store.dispatch("getOrderId",e.data.data.id),t.$store.dispatch("payMoney",!1),localStorage.getItem("store")&&localStorage.removeItem("store"),t.$router.push("/payment"))})).catch((function(){}))},checkCoupon:function(t){var e=this;this.couponLoading=!0,this.couponWorking="";var a="".concat("https://course-ec-api.hexschool.io/api/").concat("8a8058c0-58d2-485b-b7fc-3c9be181cca7","/ec/coupon/search"),o={code:t};this.$http.post(a,o).then((function(t){e.couponLoading=!1,e.couponWorking=!0,e.coupon=t.data.data;var a=e.cartTotal;e.cartTotalCoupon=0,e.couponPrice=0,e.coupon.percent&&(e.cartTotalCoupon=Math.round(a*(e.coupon.percent/100)),e.couponPrice=a-e.cartTotalCoupon,a=e.cartTotalCoupon)})).catch((function(){e.couponLoading=!1,e.couponWorking=!1,e.couponPrice=0}))}},created:function(){var t=this;localStorage.getItem("coupon")?(this.coupon=JSON.parse(localStorage.getItem("coupon")),this.coupon.code&&setTimeout((function(){t.checkCoupon(t.coupon.code)}),0)):this.coupon={},this.getCart()}}),r=n,l=(a("1593"),a("2877")),i=Object(l["a"])(r,o,s,!1,null,null,null);e["default"]=i.exports},"9fc3":function(t,e,a){}}]);
//# sourceMappingURL=chunk-2e4ec88b.0c949232.js.map